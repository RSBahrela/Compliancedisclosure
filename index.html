<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conflict of Interest Disclosure Form</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.5;
            color: #1a1a1a;
            background: #ffffff;
            min-height: 100vh;
            padding: 15px;
        }

        .form-container {
            max-width: 900px;
            margin: 0 auto;
            background: #ffffff;
            border-radius: 16px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(90deg, #ff8a65, #ff5722);
            color: #1a1a1a;
            padding: 20px 25px;
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e1e8ed;
        }

        .header-content {
            flex: 1;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .logo {
            height: 90px;
            width: auto;
            margin-left: 20px;
            max-width: 100%;
            object-fit: contain;
        }

        .form-content {
            padding: 25px;
        }

        .progress-bar {
            height: 5px;
            background: #e1e8ed;
            border-radius: 3px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff8a65, #ff5722);
            width: 0%;
            transition: width 0.3s ease;
        }

        .personal-info-section {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #ff8a65;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .section-title::before {
            content: '';
            width: 6px;
            height: 6px;
            background: #ff8a65;
            border-radius: 50%;
            margin-right: 10px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 6px;
            font-size: 13px;
        }

        .required::after {
            content: " *";
            color: #ff5722;
            font-weight: bold;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="file"],
        select,
        textarea {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 13px;
            transition: all 0.3s ease;
            background: white;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="tel"]:focus,
        input[type="file"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #ff8a65;
            box-shadow: 0 0 0 3px rgba(255, 138, 101, 0.1);
            transform: translateY(-1px);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        select {
            cursor: pointer;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'%3e%3c/svg%3e");
            background-position: right 10px center;
            background-repeat: no-repeat;
            background-size: 14px;
            padding-right: 35px;
            appearance: none;
        }

        .category-block {
            margin-bottom: 20px;
            padding: 18px;
            background: #ffffff;
            border-radius: 12px;
            border: 2px solid #e1e8ed;
            transition: all 0.3s ease;
        }

        .category-block:hover {
            border-color: #ff8a65;
            box-shadow: 0 3px 12px rgba(255, 138, 101, 0.1);
        }

        .category-title {
            font-size: 16px;
            font-weight: 600;
            color: white;
            margin-bottom: 12px;
            padding: 8px 12px;
            background: linear-gradient(135deg, #ff8a65 0%, #ff5722 100%);
            border-radius: 8px;
            text-align: center;
        }

        .main-question {
            margin-bottom: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 3px solid #ff8a65;
        }

        .main-question label {
            font-size: 14px;
            font-weight: 500;
            color: #1a1a1a;
            margin-bottom: 10px;
        }

        .main-question select {
            font-size: 14px;
            font-weight: 500;
        }

        .follow-up-questions {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #fff3e0;
            border-radius: 8px;
            border: 2px solid #ff8a65;
            animation: slideDown 0.3s ease;
        }

        .follow-up-questions.show {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .follow-up-title {
            font-size: 14px;
            font-weight: 600;
            color: #ff5722;
            margin-bottom: 12px;
            text-align: center;
        }

        .attachment-section {
            margin-top: 15px;
            padding: 15px;
            background: #f0f8ff;
            border-radius: 8px;
            border: 2px solid #4a90e2;
        }

        .attachment-section h4 {
            color: #4a90e2;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .submit-section {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            margin-top: 20px;
        }

        .submit-btn {
            background: linear-gradient(135deg, #ff8a65 0%, #ff5722 100%);
            color: white;
            padding: 12px 35px;
            border: none;
            border-radius: 25px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 12px rgba(255, 87, 34, 0.3);
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 87, 34, 0.4);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .form-content {
                padding: 15px;
            }
            
            .category-block {
                padding: 12px;
            }
            
            .header {
                padding: 15px;
                flex-direction: column;
                text-align: center;
            }
            
            .logo {
                margin-left: 0;
                margin-top: 10px;
            }
            
            .header h1 {
                font-size: 20px;
            }
        }

        .hidden {
            display: none;
        }

        .fade-in {
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Reduced spacing adjustments */
        .personal-info-section,
        .category-block {
            margin-bottom: 18px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-row {
            margin-bottom: 15px;
        }

        .main-question {
            margin-bottom: 12px;
        }

        .follow-up-questions {
            margin-top: 12px;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <div class="header">
            <div class="header-content">
                <h1>Conflict of Interest Disclosure Form</h1>
                <p>All questions are mandatory. Please ensure all fields are completed to successfully submit the Disclosure Form</p>
            </div>
            <img src="https://logotyp.us/file/innovaccer.svg" alt="Innovaccer Logo" class="logo">
        </div>

        <div class="form-content">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <form id="disclosureForm">
                <!-- Personal Information Section -->
                <div class="personal-info-section">
                    <h2 class="section-title">Personal Information</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="first_name" class="required">First Name</label>
                            <input type="text" id="FirstName" name="first_name" maxlength="40" required>
                        </div>
                        <div class="form-group">    
                            <label for="last_name" class="required">Last Name</label>
                            <input type="text" id="LastName" name="last_name" maxlength="80" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email" class="required">Email Address</label>
                            <input type="email" id="email" name="email" maxlength="80" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone" maxlength="40">
                        </div>
                    </div>
                </div>

                <!-- Category 1: Outside Activities -->
                <div class="category-block">
                    <div class="category-title">Outside Activities</div>
                    <div class="main-question">
                        <label for="ExternalAffiliationConflict">Are you a director, officer, partner, employee, contractor, board member or agent of any entity that conducts business with and/or competes with our organization?</label>
                        <select id="ExternalAffiliationConflict" name="ExternalAffiliationConflict" onchange="toggleFollowUp('ExternalAffiliationConflict', 'followup_external_affiliation')">
                            <option value="">--Please Select--</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <div id="followup_external_affiliation" class="follow-up-questions">
                        <div class="follow-up-title">Additional Information Required</div>
                        <div class="form-group">
                            <label for="OrganizationName1">What is the name of the organization?</label>
                            <textarea id="OrganizationName1" name="OrganizationName1" placeholder="Enter the organization name"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="OrganizationIndustry1">What is the nature or industry of the organization?</label>
                            <textarea id="OrganizationIndustry1" name="OrganizationIndustry1" placeholder="Describe the industry"></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="IsNonProfit1">Is the organization a non-profit? (YES/NO)</label>
                                <select id="IsNonProfit1" name="IsNonProfit1">
                                    <option value="">--Please Select--</option>
                                    <option value="Yes">Yes</option>
                                    <option value="No">No</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="OrgRelationToOurOrg1">How is the organization related to our organization?</label>
                            <textarea id="OrgRelationToOurOrg1" name="OrgRelationToOurOrg1" placeholder="Describe the relationship"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="YourRoleOrTitle1">What is your relationship to that organization? (specific role and/or title)</label>
                            <textarea id="YourRoleOrTitle1" name="YourRoleOrTitle1" placeholder="Describe your role"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="RoleActivitiesAndOverlap1">Please describe what you are doing in your role and how/if it overlaps with our organization:</label>
                            <textarea id="RoleActivitiesAndOverlap1" name="RoleActivitiesAndOverlap1" placeholder="Describe activities and any overlap with your current role"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="ReceivingCompensation1">Are you receiving or will you receive compensation?</label>
                            <textarea id="ReceivingCompensation1" name="ReceivingCompensation1" placeholder="Describe any compensation received"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="AdditionalComments1">Additional Comments</label>
                            <textarea id="AdditionalComments1" name="AdditionalComments1" rows="3" placeholder="Any additional information you'd like to provide"></textarea>
                        </div>
                        
                        <!-- Attachment section for Outside Activities -->
                        <div class="attachment-section">
                            <h4>Outside Activities Related Documents</h4>
                            <div class="form-group">
                                <label for="attachment1">Upload Outside Activities Related Documents</label>
                                <input type="file" id="attachment1" name="attachment1" multiple>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Category 2: Outside Employment or Service -->
                <div class="category-block">
                    <div class="category-title">Outside Employment or Service</div>
                    <div class="main-question">
                        <label for="OutsideEmploymentConflict">Do you have a second job, side business, or an arrangement to provide outside services which may pose a conflict, as defined in our Conflict of Interest policy?</label>
                        <select id="OutsideEmploymentConflict" name="OutsideEmploymentConflict" onchange="toggleFollowUp('OutsideEmploymentConflict', 'followup_outside_employment')">
                            <option value="">--Please Select--</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <div id="followup_outside_employment" class="follow-up-questions">
                        <div class="follow-up-title">Additional Information Required</div>
                        <div class="form-group">
                            <label for="OrganizationName2">What is the name of the organization?</label>
                            <textarea id="OrganizationName2" name="OrganizationName2" placeholder="Enter the organization name"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="OrganizationIndustry2">What is the nature or industry of the organization?</label>
                            <textarea id="OrganizationIndustry2" name="OrganizationIndustry2" placeholder="Describe the industry"></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="IsCompetitorOrPartner2">Is Competitor or Partner</label>
                                <select id="IsCompetitorOrPartner2" name="IsCompetitorOrPartner2">
                                    <option value="">--Please Select--</option>
                                    <option value="Yes">Yes</option>
                                    <option value="No">No</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="WorkDescription2">Which description fits best - second job, side business, freelance work, or other?</label>
                            <textarea id="WorkDescription2" name="WorkDescription2" placeholder="Describe the type of work"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="WorkSchedule2">What is your work schedule?</label>
                            <textarea id="WorkSchedule2" name="WorkSchedule2" placeholder="Describe your work schedule"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="CompensationDetails2">Are you receiving or will you receive compensation?</label>
                            <textarea id="CompensationDetails2" name="CompensationDetails2" placeholder="Describe any compensation received"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="AdditionalComments2">Additional Comments</label>
                            <textarea id="AdditionalComments2" name="AdditionalComments2" rows="3" placeholder="Any additional information you'd like to provide"></textarea>
                        </div>
                        
                        <!-- Attachment section for Outside Employment -->
                        <div class="attachment-section">
                            <h4>Outside Employment Related Documents</h4>
                            <div class="form-group">
                                <label for="attachment2">Upload Outside Employment Related Documents</label>
                                <input type="file" id="attachment2" name="attachment2" multiple>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Category 3: Financial Interest -->
                <div class="category-block">
                    <div class="category-title">Financial Interest</div>
                    <div class="main-question">
                        <label for="FinancialInterestConflict">Do you have a financial interest with any entity that conducts business, competes, and/or could be perceived as conflicting with our organization? This includes direct financial interests such as ownership or equity, and indirect financial interests such as reciprocal relationships or arrangements?</label>
                        <select id="FinancialInterestConflict" name="FinancialInterestConflict" onchange="toggleFollowUp('FinancialInterestConflict', 'followup_financial_interest')">
                            <option value="">--Please Select--</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <div id="followup_financial_interest" class="follow-up-questions">
                        <div class="follow-up-title">Additional Information Required</div>
                        <div class="form-group">
                            <label for="OrganizationName3">What is the name of the organization?</label>
                            <textarea id="OrganizationName3" name="OrganizationName3" placeholder="Enter the organization name"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="FinancialInterestType3">What type of financial interest do you have?</label>
                            <textarea id="FinancialInterestType3" name="FinancialInterestType3" placeholder="Describe the type of financial interest"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="FinancialInterestValue3">What is the approximate value of your financial interest?</label>
                            <textarea id="FinancialInterestValue3" name="FinancialInterestValue3" placeholder="Describe the approximate value"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="AdditionalComments3">Additional Comments</label>
                            <textarea id="AdditionalComments3" name="AdditionalComments3" rows="3" placeholder="Any additional information you'd like to provide"></textarea>
                        </div>
                        
                        <!-- Attachment section for Financial Interest -->
                        <div class="attachment-section">
                            <h4>Financial Interest Related Documents</h4>
                            <div class="form-group">
                                <label for="attachment3">Upload Financial Interest Related Documents</label>
                                <input type="file" id="attachment3" name="attachment3" multiple>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Category 4: Family or Close Personal Relationship Within Our Organization -->
                <div class="category-block">
                    <div class="category-title">Family or Close Personal Relationship Within Our Organization</div>
                    <div class="main-question">
                        <label for="FamilyRelationshipConflict">Do you have a personal, family, social, or business relationship with your manager, a trustee, an officer, a board member, or a senior employee of our organization?</label>
                        <select id="FamilyRelationshipConflict" name="FamilyRelationshipConflict" onchange="toggleFollowUp('FamilyRelationshipConflict', 'followup_family_relationship')">
                            <option value="">--Please Select--</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <div id="followup_family_relationship" class="follow-up-questions">
                        <div class="follow-up-title">Additional Information Required</div>
                        <div class="form-group">
                            <label for="PersonName4">What is the name of the person?</label>
                            <textarea id="PersonName4" name="PersonName4" placeholder="Enter the person's name"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="PersonRole4">What is their role/title in our organization?</label>
                            <textarea id="PersonRole4" name="PersonRole4" placeholder="Describe their role or title"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="RelationshipType4">What is the nature of your relationship?</label>
                            <textarea id="RelationshipType4" name="RelationshipType4" placeholder="Describe the relationship"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="AdditionalComments4">Additional Comments</label>
                            <textarea id="AdditionalComments4" name="AdditionalComments4" rows="3" placeholder="Any additional information you'd like to provide"></textarea>
                        </div>
                        
                        <!-- Attachment section for Family Relationship -->
                        <div class="attachment-section">
                            <h4>Family Relationship Related Documents</h4>
                            <div class="form-group">
                                <label for="attachment4">Upload Family Relationship Related Documents</label>
                                <input type="file" id="attachment4" name="attachment4" multiple>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Category 5: Family or Close Personal Relationship Outside Our Organization -->
                <div class="category-block">
                    <div class="category-title">Family or Close Personal Relationship Outside Our Organization</div>
                    <div class="main-question">
                        <label for="OutsideFamilyRelationshipConflict">Do you have a family member or close personal relationship who is involved with a company or organization that conducts business, competes, and/or could be perceived as conflicting with our organization?</label>
                        <select id="OutsideFamilyRelationshipConflict" name="OutsideFamilyRelationshipConflict" onchange="toggleFollowUp('OutsideFamilyRelationshipConflict', 'followup_outside_family_relationship')">
                            <option value="">--Please Select--</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <div id="followup_outside_family_relationship" class="follow-up-questions">
                        <div class="follow-up-title">Additional Information Required</div>
                        <div class="form-group">
                            <label for="PersonName5">What is the name of the person?</label>
                            <textarea id="PersonName5" name="PersonName5" placeholder="Enter the person's name"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="OrganizationName5">What is the name of the organization they are involved with?</label>
                            <textarea id="OrganizationName5" name="OrganizationName5" placeholder="Enter the organization name"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="RelationshipType5">What is your relationship to this person?</label>
                            <textarea id="RelationshipType5" name="RelationshipType5" placeholder="Describe your relationship"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="PersonRole5">What is their role in that organization?</label>
                            <textarea id="PersonRole5" name="PersonRole5" placeholder="Describe their role"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="AdditionalComments5">Additional Comments</label>
                            <textarea id="AdditionalComments5" name="AdditionalComments5" rows="3" placeholder="Any additional information you'd like to provide"></textarea>
                        </div>
                        
                        <!-- Attachment section for Outside Family Relationship -->
                        <div class="attachment-section">
                            <h4>Outside Family Relationship Related Documents</h4>
                            <div class="form-group">
                                <label for="attachment5">Upload Outside Family Relationship Related Documents</label>
                                <input type="file" id="attachment5" name="attachment5" multiple>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Category 6: Intellectual Property -->
                <div class="category-block">
                    <div class="category-title">Intellectual Property</div>
                    <div class="main-question">
                        <label for="IntellectualPropertyConflict">Do you own or plan to own intellectual property?</label>
                        <select id="IntellectualPropertyConflict" name="IntellectualPropertyConflict" onchange="toggleFollowUp('IntellectualPropertyConflict', 'followup_intellectual_property')">
                            <option value="">--Please Select--</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <div id="followup_intellectual_property" class="follow-up-questions">
                        <div class="follow-up-title">Additional Information Required</div>
                        <div class="form-group">
                            <label for="IPType6">What type of intellectual property?</label>
                            <textarea id="IPType6" name="IPType6" placeholder="Describe the type of intellectual property"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="IPDescription6">Please describe the intellectual property</label>
                            <textarea id="IPDescription6" name="IPDescription6" placeholder="Provide a description"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="IPRelationToWork6">How does this relate to your work at our organization?</label>
                            <textarea id="IPRelationToWork6" name="IPRelationToWork6" placeholder="Describe the relationship to your work"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="AdditionalComments6">Additional Comments</label>
                            <textarea id="AdditionalComments6" name="AdditionalComments6" rows="3" placeholder="Any additional information you'd like to provide"></textarea>
                        </div>
                        
                        <!-- Attachment section for Intellectual Property -->
                        <div class="attachment-section">
                            <h4>Intellectual Property Related Documents</h4>
                            <div class="form-group">
                                <label for="attachment6">Upload Intellectual Property Related Documents</label>
                                <input type="file" id="attachment6" name="attachment6" multiple>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Category 7: Payment to Government Official -->
                <div class="category-block">
                    <div class="category-title">Payment to Government Official</div>
                    <div class="main-question">
                        <label for="GovPaymentConflict">Have you provided or offered gifts, hospitality (such as the payment of hotel, transportation, meal and entertainment expenses), or anything of value to a government official?</label>
                        <select id="GovPaymentConflict" name="GovPaymentConflict" onchange="toggleFollowUp('GovPaymentConflict', 'followup_gov_payment')">
                            <option value="">--Please Select--</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <div id="followup_gov_payment" class="follow-up-questions">
                        <div class="follow-up-title">Additional Information Required</div>
                        <div class="form-group">
                            <label for="OfficialName7">What is the name of the government official?</label>
                            <textarea id="OfficialName7" name="OfficialName7" placeholder="Enter the official's name"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="OfficialRole7">What is their role/position?</label>
                            <textarea id="OfficialRole7" name="OfficialRole7" placeholder="Describe their role or position"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="PaymentType7">What type of payment/gift was provided?</label>
                            <textarea id="PaymentType7" name="PaymentType7" placeholder="Describe the payment or gift"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="PaymentValue7">What was the approximate value?</label>
                            <textarea id="PaymentValue7" name="PaymentValue7" placeholder="Describe the approximate value"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="PaymentPurpose7">What was the purpose/reason?</label>
                            <textarea id="PaymentPurpose7" name="PaymentPurpose7" placeholder="Describe the purpose or reason"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="AdditionalComments7">Additional Comments</label>
                            <textarea id="AdditionalComments7" name="AdditionalComments7" rows="3" placeholder="Any additional information you'd like to provide"></textarea>
                        </div>
                        
                        <!-- Attachment section for Government Payment -->
                        <div class="attachment-section">
                            <h4>Government Payment Related Documents</h4>
                            <div class="form-group">
                                <label for="attachment7">Upload Government Payment Related Documents</label>
                                <input type="file" id="attachment7" name="attachment7" multiple>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Category 8: Political Activity -->
                <div class="category-block">
                    <div class="category-title">Political Activity</div>
                    <div class="main-question">
                        <label for="PoliticalActivityConflict">Do you currently hold an elected, appointed or advisory position in any federal, state, local or provincial government or are you a candidate for a political office?</label>
                        <select id="PoliticalActivityConflict" name="PoliticalActivityConflict" onchange="toggleFollowUp('PoliticalActivityConflict', 'followup_political_activity')">
                            <option value="">--Please Select--</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <div id="followup_political_activity" class="follow-up-questions">
                        <div class="follow-up-title">Additional Information Required</div>
                        <div class="form-group">
                            <label for="PositionTitle8">What is the title of your position?</label>
                            <textarea id="PositionTitle8" name="PositionTitle8" placeholder="Enter the position title"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="GovernmentLevel8">What level of government?</label>
                            <textarea id="GovernmentLevel8" name="GovernmentLevel8" placeholder="Describe the level of government"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="PositionDuration8">How long have you held this position?</label>
                            <textarea id="PositionDuration8" name="PositionDuration8" placeholder="Describe the duration"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="PositionResponsibilities8">What are your responsibilities?</label>
                            <textarea id="PositionResponsibilities8" name="PositionResponsibilities8" placeholder="Describe your responsibilities"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="AdditionalComments8">Additional Comments</label>
                            <textarea id="AdditionalComments8" name="AdditionalComments8" rows="3" placeholder="Any additional information you'd like to provide"></textarea>
                        </div>
                        
                        <!-- Attachment section for Political Activity -->
                        <div class="attachment-section">
                            <h4>Political Activity Related Documents</h4>
                            <div class="form-group">
                                <label for="attachment8">Upload Political Activity Related Documents</label>
                                <input type="file" id="attachment8" name="attachment8" multiple>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Category 9: Gift or Service Received -->
                <div class="category-block">
                    <div class="category-title">Gift or Service Received</div>
                    <div class="main-question">
                        <label for="GiftsReceivedConflict">Have you accepted any gift(s) that might reasonably be regarded as influencing or having the potential of influencing your judgment/actions in relation to the entity concerned? This includes any entity that conducts business, competes, and/or could be perceived as conflicting with our organization. This includes any gift(s), gratuity, service, hospitality and/or entertainment</label>
                        <select id="GiftsReceivedConflict" name="GiftsReceivedConflict" onchange="toggleFollowUp('GiftsReceivedConflict', 'followup_gifts_received')">
                            <option value="">--Please Select--</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <div id="followup_gifts_received" class="follow-up-questions">
                        <div class="follow-up-title">Additional Information Required</div>
                        <div class="form-group">
                            <label for="GiftDescription9">What gift(s) did you receive?</label>
                            <textarea id="GiftDescription9" name="GiftDescription9" placeholder="Describe the gift(s) received"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="GiftValue9">What was the approximate value?</label>
                            <textarea id="GiftValue9" name="GiftValue9" placeholder="Describe the approximate value"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="GiftSource9">Who provided the gift(s)?</label>
                            <textarea id="GiftSource9" name="GiftSource9" placeholder="Describe who provided the gift(s)"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="GiftOccasion9">What was the occasion/reason?</label>
                            <textarea id="GiftOccasion9" name="GiftOccasion9" placeholder="Describe the occasion or reason"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="AdditionalComments9">Additional Comments</label>
                            <textarea id="AdditionalComments9" name="AdditionalComments9" rows="3" placeholder="Any additional information you'd like to provide"></textarea>
                        </div>
                        
                        <!-- Attachment section for Gifts Received -->
                        <div class="attachment-section">
                            <h4>Gifts Received Related Documents</h4>
                            <div class="form-group">
                                <label for="attachment9">Upload Gifts Received Related Documents</label>
                                <input type="file" id="attachment9" name="attachment9" multiple>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Category 10: Gifts or Services Given or Donated -->
                <div class="category-block">
                    <div class="category-title">Gifts or Services Given or Donated</div>
                    <div class="main-question">
                        <label for="GiftsGivenConflict">Have you (either personally or in your role in our organization) given any gift(s) that might reasonably be regarded as influencing or having the potential of influencing judgment/actions (yours or theirs) in relation to the entity concerned? This includes any entity that conducts business, competes, and/or could be perceived as conflicting with our organization. This includes any gift(s), gratuity, service, hospitality and/or entertainment</label>
                        <select id="GiftsGivenConflict" name="GiftsGivenConflict" onchange="toggleFollowUp('GiftsGivenConflict', 'followup_gifts_given')">
                            <option value="">--Please Select--</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <div id="followup_gifts_given" class="follow-up-questions">
                        <div class="follow-up-title">Additional Information Required</div>
                        <div class="form-group">
                            <label for="GiftDescription10">What gift(s) did you give?</label>
                            <textarea id="GiftDescription10" name="GiftDescription10" placeholder="Describe the gift(s) given"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="GiftValue10">What was the approximate value?</label>
                            <textarea id="GiftValue10" name="GiftValue10" placeholder="Describe the approximate value"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="GiftRecipient10">Who received the gift(s)?</label>
                            <textarea id="GiftRecipient10" name="GiftRecipient10" placeholder="Describe who received the gift(s)"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="GiftOccasion10">What was the occasion/reason?</label>
                            <textarea id="GiftOccasion10" name="GiftOccasion10" placeholder="Describe the occasion or reason"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="AdditionalComments10">Additional Comments</label>
                            <textarea id="AdditionalComments10" name="AdditionalComments10" rows="3" placeholder="Any additional information you'd like to provide"></textarea>
                        </div>
                        
                        <!-- Attachment section for Gifts Given -->
                        <div class="attachment-section">
                            <h4>Gifts Given Related Documents</h4>
                            <div class="form-group">
                                <label for="attachment10">Upload Gifts Given Related Documents</label>
                                <input type="file" id="attachment10" name="attachment10" multiple>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Category 11: Other Potential Conflicts -->
                <div class="category-block">
                    <div class="category-title">Other Potential Conflicts</div>
                    <div class="main-question">
                        <label for="OtherConflictsConflict">Are there any other potential conflicts of interest not covered by the above categories that you would like to disclose?</label>
                        <select id="OtherConflictsConflict" name="OtherConflictsConflict" onchange="toggleFollowUp('OtherConflictsConflict', 'followup_other_conflicts')">
                            <option value="">--Please Select--</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <div id="followup_other_conflicts" class="follow-up-questions">
                        <div class="follow-up-title">Additional Information Required</div>
                        <div class="form-group">
                            <label for="ConflictDescription11">Please describe the potential conflict</label>
                            <textarea id="ConflictDescription11" name="ConflictDescription11" placeholder="Describe the potential conflict"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="ConflictParties11">Who are the parties involved?</label>
                            <textarea id="ConflictParties11" name="ConflictParties11" placeholder="Describe the parties involved"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="ConflictImpact11">How might this impact your work?</label>
                            <textarea id="ConflictImpact11" name="ConflictImpact11" placeholder="Describe the potential impact"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="AdditionalComments11">Additional Comments</label>
                            <textarea id="AdditionalComments11" name="AdditionalComments11" rows="3" placeholder="Any additional information you'd like to provide"></textarea>
                        </div>
                        
                        <!-- Attachment section for Other Conflicts -->
                        <div class="attachment-section">
                            <h4>Other Conflicts Related Documents</h4>
                            <div class="form-group">
                                <label for="attachment11">Upload Other Conflicts Related Documents</label>
                                <input type="file" id="attachment11" name="attachment11" multiple>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Submit Section -->
                <div class="submit-section">
                    <button type="submit" class="submit-btn">Submit Disclosure Form</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Function to toggle follow-up questions
        function toggleFollowUp(selectId, followUpId) {
            const select = document.getElementById(selectId);
            const followUp = document.getElementById(followUpId);
            
            if (select.value === 'Yes') {
                followUp.classList.add('show');
            } else {
                followUp.classList.remove('show');
            }
            
            updateProgress();
        }

        // Function to update progress bar
        function updateProgress() {
            const selects = document.querySelectorAll('select[id$="Conflict"]');
            const completed = Array.from(selects).filter(select => select.value !== '').length;
            const total = selects.length;
            const percentage = (completed / total) * 100;
            
            document.getElementById('progressFill').style.width = percentage + '%';
        }

        // Google Drive API configuration
        const GOOGLE_DRIVE_API_KEY = 'ya29.a0AS3H6NwVd6q-RX2a_BLXfdGSLhpNLYvLyEY8A1tA8CDyfjXLYoFkdXC5KifjAOQWkXNSDjI5mzahApTAlB5FrNna5KqfKSnNGQTwxklS741IpmqcTLWu2ftJFpQlnXvdSDufgTv-lSNui-yjJY3rV7FQlJ4s2h6P_DGo4nqsaCgYKAV8SARYSFQHGX2MiXZifkjtnsPy3J6zmlLvBag0175'; // Replace with your actual API Key
        const GOOGLE_DRIVE_FOLDER_ID = '1cw8MBXAJJkNmfg1js6sjsMUKiognXubD'; // Replace with your actual Folder ID

        // Function to upload files to Google Drive
        async function uploadFilesToGoogleDrive(files, category) {
            const uploadPromises = Array.from(files).map(async (file) => {
                try {
                    const metadata = {
                        name: `${category}_${Date.now()}_${file.name}`,
                        parents: [GOOGLE_DRIVE_FOLDER_ID]
                    };

                    const form = new FormData();
                    form.append('metadata', new Blob([JSON.stringify(metadata)], {type: 'application/json'}));
                    form.append('file', file);

                    const response = await fetch(`https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&key=${GOOGLE_DRIVE_API_KEY}`, {
                        method: 'POST',
                        body: form
                    });

                    if (response.ok) {
                        const result = await response.json();
                        
                        // Make the file publicly accessible
                        await fetch(`https://www.googleapis.com/drive/v3/files/${result.id}/permissions?key=${GOOGLE_DRIVE_API_KEY}`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                role: 'reader',
                                type: 'anyone'
                            })
                        });

                        return `https://drive.google.com/file/d/${result.id}/view`;
                    } else {
                        console.error('Failed to upload file:', file.name);
                        return null;
                    }
                } catch (error) {
                    console.error('Error uploading file:', error);
                    return null;
                }
            });
            
            return await Promise.all(uploadPromises);
        }

        // Function to create a lead in Salesforce
        async function createLead(leadData, category, categoryIndex) {
            try {
                // Map categories to their respective document field numbers
                const categoryToDocumentField = {
                    'outside_activities': 1,
                    'outside_employment': 2,
                    'financial_interest': 3,
                    'family_relationship_internal': 4,
                    'family_relationship_external': 5,
                    'intellectual_property': 6,
                    'gov_payment': 7,
                    'political_activity': 8,
                    'gifts_received': 9,
                    'gifts_given': 10,
                    'other_conflicts': 11
                };

                // Prepare the lead data with updated field names
                const salesforceData = {
                    oid: '00DWd000002VvsS',
                    retURL: 'https://innovaccer.com',
                    first_name: leadData.first_name || 'Conflict',
                    last_name: leadData.last_name || 'Disclosure',
                    company: 'Innovaccer',
                    email: leadData.email || '',
                    phone: leadData.phone || '',
                    LeadSource: 'Conflict form',
                    '00NWd000005a2DJ': category // Category field
                };

                // Add category-specific fields
                Object.keys(leadData).forEach(key => {
                    if (!salesforceData.hasOwnProperty(key) && leadData[key] && key !== 'first_name' && key !== 'last_name' && key !== 'email' && key !== 'phone') {
                        if (typeof leadData[key] !== 'object') { // Skip file objects
                            salesforceData[key] = leadData[key];
                        }
                    }
                });

                // Handle file uploads for this category BEFORE creating the lead
                const attachmentFieldMap = {
                    'outside_activities': 'attachment1',
                    'outside_employment': 'attachment2',
                    'financial_interest': 'attachment3',
                    'family_relationship_internal': 'attachment4',
                    'family_relationship_external': 'attachment5',
                    'intellectual_property': 'attachment6',
                    'gov_payment': 'attachment7',
                    'political_activity': 'attachment8',
                    'gifts_received': 'attachment9',
                    'gifts_given': 'attachment10',
                    'other_conflicts': 'attachment11'
                };

                const attachmentField = attachmentFieldMap[category];
                let documentLink = '';
                
                if (attachmentField && leadData[attachmentField] && leadData[attachmentField].length > 0) {
                    const uploadedFileLinks = await uploadFilesToGoogleDrive(leadData[attachmentField], category);
                    if (uploadedFileLinks.length > 0 && uploadedFileLinks[0]) {
                        documentLink = uploadedFileLinks[0]; // Take the first uploaded file link
                    }
                }

                // Add the document link to the appropriate field based on category
                const documentFieldNumber = categoryToDocumentField[category];
                if (documentFieldNumber && documentLink) {
                    salesforceData[`Document${documentFieldNumber}_Link__c`] = documentLink;
                }

                const response = await fetch('https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8&orgId=00DWd000002VvsS', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: new URLSearchParams(salesforceData)
                });

                if (response.ok) {
                    return { 
                        success: true, 
                        category: category, 
                        documentLink: documentLink,
                        documentField: documentFieldNumber ? `Document${documentFieldNumber}_Link__c` : null
                    };
                } else {
                    const errorText = await response.text();
                    console.error('Salesforce API Error:', errorText);
                    return { success: false, error: errorText, category: category };
                }
            } catch (error) {
                console.error('Error creating lead:', error);
                return { success: false, error: error.message, category: category };
            }
        }

        // Form submission handler
        document.getElementById('disclosureForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            try {
                const formData = new FormData(this);
                const data = {};
                
                // Collect form data
                for (let [key, value] of formData.entries()) {
                    if (key.startsWith('attachment')) {
                        // Handle file inputs
                        const fileInput = document.getElementById(key);
                        if (fileInput && fileInput.files.length > 0) {
                            data[key] = fileInput.files;
                        }
                    } else {
                        data[key] = value;
                    }
                }

                // Determine which categories have "Yes" responses
                const categories = [
                    { id: 'ExternalAffiliationConflict', name: 'outside_activities' },
                    { id: 'OutsideEmploymentConflict', name: 'outside_employment' },
                    { id: 'FinancialInterestConflict', name: 'financial_interest' },
                    { id: 'FamilyRelationshipConflict', name: 'family_relationship_internal' },
                    { id: 'OutsideFamilyRelationshipConflict', name: 'family_relationship_external' },
                    { id: 'IntellectualPropertyConflict', name: 'intellectual_property' },
                    { id: 'GovPaymentConflict', name: 'gov_payment' },
                    { id: 'PoliticalActivityConflict', name: 'political_activity' },
                    { id: 'GiftsReceivedConflict', name: 'gifts_received' },
                    { id: 'GiftsGivenConflict', name: 'gifts_given' },
                    { id: 'OtherConflictsConflict', name: 'other_conflicts' }
                ];

                const selectedCategories = categories.filter(cat => data[cat.id] === 'Yes');

                if (selectedCategories.length === 0) {
                    // If no categories selected as "Yes", create one lead with "No Conflicts"
                    const noConflictData = {
                        first_name: data.first_name,
                        last_name: data.last_name,
                        email: data.email,
                        phone: data.phone
                    };

                    const result = await createLead(noConflictData, 'No Conflicts', 0);
                    
                    if (result.success) {
                        alert('Conflict disclosure submitted successfully with no conflicts reported.');
                        this.reset();
                        document.querySelectorAll('.follow-up-questions').forEach(div => {
                            div.classList.remove('show');
                        });
                        updateProgress();
                    } else {
                        alert('Failed to submit conflict disclosure. Please try again.');
                    }
                } else {
                    // Create separate leads for each selected category
                    const results = await Promise.all(
                        selectedCategories.map((category, index) => 
                            createLead(data, category.name, index + 1)
                        )
                    );

                    // Check results
                    const successful = results.filter(r => r.success);
                    const failed = results.filter(r => !r.success);

                    if (successful.length > 0) {
                        let message = `Successfully submitted ${successful.length} conflict disclosure(s):\n`;
                        successful.forEach(result => {
                            message += `- ${result.category}\n`;
                            if (result.documentLink && result.documentField) {
                                message += `  Document uploaded to: ${result.documentField}\n`;
                                message += `  Google Drive link: ${result.documentLink}\n`;
                            }
                        });
                        
                        if (failed.length > 0) {
                            message += `\nFailed to submit ${failed.length} disclosure(s):\n`;
                            failed.forEach(result => {
                                message += `- ${result.category}: ${result.error}\n`;
                            });
                        }
                        
                        alert(message);
                        
                        if (failed.length === 0) {
                            this.reset();
                            // Hide all follow-up questions
                            document.querySelectorAll('.follow-up-questions').forEach(div => {
                                div.classList.remove('show');
                            });
                            updateProgress();
                        }
                    } else {
                        alert('Failed to submit any conflict disclosures. Please try again.');
                    }
                }

            } catch (error) {
                console.error('Form submission error:', error);
                alert('An error occurred while submitting the form. Please try again.');
            }
        });

        // Initialize progress bar
        updateProgress();
    </script>
</body>
</html>

